---
output:
html_document:
self_contained: false
lib_dir: "libs"
fig_height: 2
fig_width: 4
params:
element: "salmon"
---

```{r, echo=FALSE, message=F, warning=F}
knitr::opts_chunk$set(echo=F, message=F, warning=F)
library(infographiq)
```

<base target="_parent">

```{r}
tryCatch(
    plot_timeseries(
        csv_tv  = "https://raw.githubusercontent.com/marinebon/info-mb/master/prep/data/fish/CCIEA_Chinook_salmon_CC.csv",
        title   = "Chinook Salmon Abundance",
        y_label = "Abundance anomaly (observed mean/standard deviation)",
        skip    = 0,
        filter  = NULL,
        col_t   = "yr",
        col_y   = "abundance",
        group_by= NULL
    ),
    error = function(e) e
)
```
Calculations:  Abundance indices are calculated as longterm anomalies observed mean/standard deviation) of annual escapement by natural origin Fall Run Chinook to the Klamath and Trinity River systems. Data series for multiple subpopulations were standardized by subtracting the series mean and dividing by the series standard deviation. If a consolidated index for the stock was needed we computed an annual weighted average of the standardized series, with weights proportional to the average abundance for each subpopulation. NOAA NWFSC/SWFSC

```{r}
tryCatch(
    plot_timeseries(
        csv_tv  = "http://oceanview.pfeg.noaa.gov/erddap/tabledap/cciea_SM_CA_CO_ABND.csvp?time%2Cpopulation%2Cabundance&time%3E=1987-01-01&time%3C=2015-01-01T00%3A00%3A00Z&population=%22CaCoastal%22",
        title   = "Coho Salmon Abundance",
        y_label = "Abundance anomaly (observed mean/standard deviation)",
        skip    = 0,
        filter  = NULL,
        col_t   = "time (UTC)",
        col_y   = "abundance",
        group_by= NULL
    ),
    error = function(e) e
)
```
The Fisheries Ecology Division (FED, https://swfsc.noaa.gov/GroundfishAnalysis/) of the Southwest Fisheries Science Center (SWFSC)  midwater trawl survey off central California. Fisheries Ecology Division/SWFSC/NOAA

```{r}
tryCatch(
    plot_timeseries(
        csv_tv  = "https://raw.githubusercontent.com/marinebon/info-mb/master/prep/data/fish/FED_King_Salmon_year_sums.csv",
        title   = "King Salmon Catch",
        y_label = "Catch",
        skip    = 0,
        filter  = NULL,
        col_t   = "yr",
        col_y   = "catch",
        group_by= NULL
    ),
    error = function(e) e
)
```
